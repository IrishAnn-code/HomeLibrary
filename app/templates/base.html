<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <title>{{ title or "Library" }}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
<style>
* {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    html, body {
        height: 100%;
    }

    body {
        display: flex;
        flex-direction: column;
    }

    .main-content {
        flex: 1;
        position: relative;

    }

    footer {
        position: absolute;
        bottom: 0;
        width: 100%;
    }
</style>
</head>

<body class="p-3 mb-2 bg-dark text-light">
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
    <div class="container">
      <a class="navbar-brand" href="/">üèõ Home Library</a>

      <!-- ‚úÖ –î–ò–ù–ê–ú–ò–ß–ï–°–ö–û–ï –ú–ï–ù–Æ -->
      {% if user %}
      <!-- –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å -->
      <div class="d-flex ms-auto align-items-center">
          <a href="/library/" class="btn btn-outline-success me-2">üìö –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏</a>
          <a href="/book/" class="btn btn-outline-success me-2">üìñ –ö–Ω–∏–≥–∏</a>
        <!-- Dropdown —Å –ø—Ä–æ—Ñ–∏–ª–µ–º -->
          <div class="dropdown">
            <button class="btn btn-outline-success dropdown-toggle" type="button"
                    data-bs-toggle="dropdown" aria-expanded="false">
              üë§ {{ user.username }}
            </button>
            <ul class="dropdown-menu dropdown-menu-end">
              <li><a class="dropdown-item" href="/user/me">–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</a></li>
              <li><a class="dropdown-item" href="/user/book/me">–ú–æ–∏ –∫–Ω–∏–≥–∏</a></li>
              {% if user.is_admin %}
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item" href="/admin/users">üëë –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</a></li>
              {% endif %}
              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item text-danger" href="/user/logout">–í—ã–π—Ç–∏</a></li>
            </ul>
          </div>
        </div>
      {% else %}
      <!-- –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å -->
      <div class="d-flex ms-auto">
        <a href="/user/login" class="btn btn-outline-success me-2">–í—Ö–æ–¥</a>
        <a href="/user/register" class="btn btn-success">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
      </div>
      {% endif %}
    </div>
  </nav>

  <!-- Flash messages -->
<div class="container mt-3">
    {% for msg in messages %}
      <div class="alert alert-{{ msg.category }} alert-dismissible fade show" role="alert">
        {{ msg.message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
      </div>
    {% endfor %}
</div>

  <div class="container py-5">
    {% block crud_container %}{% endblock %}
  </div>


 <!-- Footer -->
  <footer class="bg-success mt-5 py-3">
    <div class="container text-center text-muted">
      <small>&copy; 2025 Home Library. Made with ‚ù§Ô∏è</small>
    </div>
  </footer>

<!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
 </body>
</html>