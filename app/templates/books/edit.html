{% extends "base.html" %}

{% block crud_container %}
<div class="row justify-content-center">
  <div class="col-md-8">
    <div class="card">
      <div class="card-body">
        <h3 class="card-title text-dark">Редактировать книгу</h3>

        <form action="/book/{{ book.id }}/edit" method="post">
          <div class="row">
            <div class="col-md-6 mb-3">
              <label class="form-label text-dark">Автор*</label>
              <input type="text" name="author" class="form-control"
                     value="{{ book.author }}" required>
            </div>

            <div class="col-md-6 mb-3">
              <label class="form-label text-dark">Название*</label>
              <input type="text" name="title" class="form-control"
                     value="{{ book.title }}" required>
            </div>
          </div>

          <div class="mb-3">
            <label class="form-label text-dark">Описание</label>
            <textarea name="description" class="form-control" rows="3">{{ book.description or '' }}</textarea>
          </div>

          <div class="row">
            <div class="col-md-6 mb-3">
              <label class="form-label text-dark">Жанр</label>
              <input type="text" name="genre" class="form-control"
                     list="genre-suggestions" value="{{ book.genre or '' }}">
              <datalist id="genre-suggestions">
                {% for g in popular_genres %}
                  <option value="{{ g.genre }}">
                {% endfor %}
              </datalist>
            </div>

            <div class="col-md-6 mb-3">
              <label class="form-label text-dark">Статус чтения*</label>
              <select id="read_status" name="read_status" class="form-select" required>
                <option value="not_read">Не прочитано</option>
                <option value="reading">Читаю</option>
                <option value="read">Прочитано</option>
              </select>
            </div>
          </div>

          <div class="mb-3">
            <label class="form-label text-dark">Библиотека*</label>
            <select name="library_id" class="form-select" required>
              {% for lib in libraries %}
                <option value="{{ lib.id }}"
                        {% if lib.id == book.library_id %}selected{% endif %}>
                  {{ lib.name }}
                </option>
              {% endfor %}
            </select>
          </div>

          <div class="row">
            <div class="col-md-4 mb-3">
              <label class="form-label text-dark">Адрес</label>
              <input type="text" name="lib_address" class="form-control"
                     value="{{ book.lib_address or '' }}">
            </div>

            <div class="col-md-4 mb-3">
              <label class="form-label text-dark">Комната</label>
              <input type="text" name="room" class="form-control"
                     value="{{ book.room or '' }}">
            </div>

            <div class="col-md-4 mb-3">
              <label class="form-label text-dark">Полка</label>
              <input type="text" name="shelf" class="form-control"
                     value="{{ book.shelf or '' }}">
            </div>
          </div>

          <div class="mb-3">
            <label class="form-label text-dark">Цвет обложки</label>
            <input type="color" name="color" class="form-control form-control-color"
                   value="{{ book.color or '#3498db' }}">
          </div>

          <div class="d-flex gap-2">
            <button type="submit" class="btn btn-success">Сохранить</button>
            <a href="/book/{{ book.id }}" class="btn btn-secondary">Отмена</a>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}