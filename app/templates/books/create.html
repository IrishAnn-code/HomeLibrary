{% extends "base.html" %}
{% block crud_container %}

<div class="row justify-content-center">
  <div class="col-md-8">
  <div class="card">
    <div class="card-body">
    <h2 class="text-center card-title text-dark">Добавить новую книгу</h2>

  <form method="post" action="/book/create">
    <div class="mb-3">
      <label class="form-label">Автор книги:</label>
      <input type="text" name="author" class="form-control"
         list="author-suggestions" required>
      <datalist id="author-suggestions">
        {% for a in popular_authors %}
          <option value="{{ a.author }}">{{ a.count }} книг</option>
        {% endfor %}
      </datalist>
    </div>
    <div class="mb-3">
      <label for="title" class="form-label">Название книги:</label>
      <input type="text" id="title" name="title" class="form-control" required>
    </div>
    <div class="mb-3">
      <label for="description" class="form-label">Описание:</label>
      <textarea id="description" name="description" class="form-control"></textarea>
    </div>

    <div class="mb-3">
      <label class="form-label">Жанр</label>
      <input type="text" name="genre" class="form-control"
         list="genre-suggestions" placeholder="Введите жанр">

      <!-- ✅ Datalist с популярными жанрами -->
      <datalist id="genre-suggestions">
        {% for g in popular_genres %}
          <option value="{{ g.genre }}">{{ g.count }} книг</option>
        {% endfor %}
      </datalist>
      <small class="text-secondary">Начните вводить или выберите из списка</small>
    </div>

    <div class="mb-3">
      <label for="read_status" class="form-label">Статус:</label>
      <select id="read_status" name="read_status" class="form-select" required>
        <option value="not_read">Не прочитано</option>
        <option value="reading">Читаю</option>
        <option value="read">Прочитано</option>
      </select>
    </div>

    <div class="mb-3">
      <label for="library_id" class="form-label">Библиотека:</label>
      <select id="library_id" name="library_id" class="form-select" required>
        <option value="">Выберите библиотеку</option>
        {% for library in libraries %}
        <option value="{{ library.id }}">{{ library.name }}</option>
        {% endfor %}
      </select>
    </div>

    <div class="mb-3">
      <label for="room" class="form-label">Комната:</label>
      <input type="text" id="room" name="room" class="form-control" placeholder="Например: Гостиная">
    </div>
    <div class="mb-3">
      <label for="shelf" class="form-label">Полка:</label>
      <input type="text" id="shelf" name="shelf" class="form-control" placeholder="Например: Верхняя полка">
    </div>
    <div class="mb-3">
      <label for="color" class="form-label">Цвет обложки:</label>
      <input type="color" id="color" name="color" class="form-control" value="#3498db">
    </div>
    <div class="d-flex justify-content-center p-3">
      <button type="submit" class="btn btn-success">Добавить книгу</button>
    </div>
  </form>
</div>
  </div>
</div>
  </div>
{% endblock %}