{% extends 'base.html'%}
{% block crud_container %}

<div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center mb-4">
  <h2 class="h3 mb-3 mb-md-0">üóÉÔ∏è –ú–æ–∏ –∫–Ω–∏–≥–∏</h2>
  <a href="/book/create" class="btn btn-success">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–∏–≥—É</a>
</div>

<div class="d-none d-lg-block">
    <div class="table-responsive rounded-3">
        <table class="table table-striped table-hover mb-0">
          <tr>
          <th style="width: 17%;">–ê–≤—Ç–æ—Ä</th>
          <th style="min-width: 100px;">–ù–∞–∑–≤–∞–Ω–∏–µ</th>
          <th style="width: 10%;">–ñ–∞–Ω—Ä</th>
          <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
          <th>–°—Ç–∞—Ç—É—Å</th>
          <th>–ê–¥—Ä–µ—Å</th>
          </tr>
          {% for item in books_with_status %}
          <tr>
            <td>{{ item.book.author }}</td>
            <td><a href="/book/{{ item.book.id }}">{{ item.book.title }}</a></td>
            <td>{{ item.book.genre }}</td>
            <td>{{ item.book.description }}</td>
            <td>
            <p class="card-text text-dark">
              <span class="badge bg-{{ 'success' if item.read_status == 'read' else 'warning' if item.read_status == 'reading' else 'secondary' }}">
                {{ item.read_status.russian_name }}</span>
            </p>
            </td>
            <td>{{ item.book.lib_address }}</td>
          </tr>
          {% else %}
          <tr><td colspan="6">–ù–µ—Ç –∫–Ω–∏–≥</td></tr>
          {% endfor %}
        </table>
    </div>
</div>

<!-- ‚úÖ –ö–∞—Ä—Ç–æ—á–∫–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö (–ø–æ–∫–∞–∑–∞–Ω—ã —Ç–æ–ª—å–∫–æ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö) -->
<div class="d-block d-md-none">
  {% for item in books_with_status %}
  <div class="card mb-3">
    <div class="card-body">
      <h5 class="card-title">
        <a href="/book/{{ item.book.id }}" class="text-decoration-none">
          {{ item.book.title }}
        </a>
      </h5>
      <p class="card-text mb-1">
        <strong>–ê–≤—Ç–æ—Ä:</strong> {{ item.book.author }}
      </p>
      {% if item.book.genre %}
      <p class="card-text mb-1">
        <strong>–ñ–∞–Ω—Ä:</strong> {{ item.book.genre }}
      </p>
      {% endif %}
      {% if item.book.description %}
      <p class="card-text mb-2">
        <strong>–û–ø–∏—Å–∞–Ω–∏–µ:</strong>
        <small class="text-muted">{{ item.book.description|truncate(50) }}</small>
      </p>
      {% endif %}
      <div class="d-flex justify-content-between align-items-center">
        <span class="badge bg-{{ 'success' if item.read_status.value == 'read' else 'warning' if item.read_status.value == 'reading' else 'secondary' }}">
          {{ item.read_status.russian_name }}
        </span>
        <small class="text-muted">{{ item.book.lib_address|default('–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –Ω–µ —É–∫–∞–∑–∞–Ω–∞', true) }}</small>
      </div>
    </div>
  </div>
  {% endfor %}
</div>
{% endblock %}
