{% extends "base.html" %}

{% block crud_container %}
<div class="d-flex bd-highlight mb-3">
  <div class="me-auto p-1 bd-highlight fs-3">üìö {{ library.name }}</div>
    <div class="p-2 bd-highlight">
      <a href="/book/create?library_id={{ library.id }}" class="btn btn-success">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–∏–≥—É</a>
    </div>
    <div class="p-2 bd-highlight">
      {% if library.owner_id == user.id %}
         <button onclick="confirmDelete()" class="btn btn-danger">
            üóë –£–¥–∞–ª–∏—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É
         </button>
      {% else %}
      <form action="/library/{{ library.id }}/leave" method="post">
        <button type="submit" class="btn btn-warning" onclick="return confirm('–í—ã–π—Ç–∏ –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏?')">
          üö™ –í—ã–π—Ç–∏ –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
        </button>
      </form>
      {% endif %}
    </div>
</div>

{% if books_with_status %}
<div class="card">
  <div class="card-body">
    <table class="table table-striped table-hover">
      <thead class="table-light">
        <tr>
          <th>–ê–≤—Ç–æ—Ä</th>
          <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
          <th>–ñ–∞–Ω—Ä</th>
          <th>–°—Ç–∞—Ç—É—Å</th>
          <th>–ê–¥—Ä–µ—Å</th>
        </tr>
      </thead>
      <tbody>
        {% for item in books_with_status %}
        <tr>
          <td>{{ item.book.author }}</td>
          <td><a href="/book/{{ item.book.id }}" class="text-decoration-none">{{ item.book.title }}</a></td>
          <td>{{ item.book.genre }}</td>
          <td>
            <p class="card-text text-dark">
              <span class="badge bg-{{ 'success' if item.read_status == 'read' else 'warning' if item.read_status == 'reading' else 'secondary' }}">
                {{ item.read_status.russian_name }}</span>
            </p>
          </td>
          <td>{{ item.book.lib_address }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% else %}
  <div class="alert alert-info">
    <p class="mb-0">–í —ç—Ç–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–µ –ø–æ–∫–∞ –Ω–µ—Ç –∫–Ω–∏–≥. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—É—é!</p>
  </div>
{% endif %}
<div class="d-flex justify-content-end">
  id: {{ library.id }}
</div>
{% endblock %}